{% extends 'website/base.html' %}
{% load static %}

{% block content %}
  <!-- Header -->
  <header class="masthead">
    <div class="container d-flex h-100 align-items-center">
      <div class="mx-auto text-center">
        <img class="img-fluid mb-3" src="{% static 'website/img/logo/logo_white.svg' %}" width="50%" alt="logo">
        <!--h1 class="mx-auto my-0 text-uppercase">Kaifeck</h1-->
        <h2 class="text-white-50 mx-auto mt-2 mb-5">Welcome to the official website of the band Kaifeck.</h2>
        <a href="#listen" class="btn btn-primary js-scroll-trigger">Listen</a>
      </div>
    </div>
  </header>

  <!-- Songs Section-->
  <section id="listen" class="songs-section">
    <div class="container">
      {% if videos %}
        {% for video in videos %}
          {% if forloop.counter == 1 %}
            <!-- Song 1 (featured) -->
            <div class="bg-lgray row align-items-center no-gutters mb-5 mb-lg-5">
              <div class="embed-responsive embed-responsive-16by9 col-xl-8 col-lg-7">
                <iframe class="embed-responsive-item mb-3 mb-lg-0"
                        src="{{ video.get_embed_link }}" allowfullscreen></iframe>
              </div>
              <div class="col-xl-4 col-lg-5">
                <div class="featured-text text-center text-lg-left">
                  <h4>{{ video.title }}</h4>
                  <p class="text-black-50 mb-0">Our latest release.</p>
                  <p class="text-black-50 mb-0">Support us on <a href="https://kaifeck.bandcamp.com" target="_blank">Bandcamp.</a></p>
                </div>
              </div>
            </div>
          {% else %}
            <!-- Song {{ forloop.counter }} -->
            <div class="row justify-content-center no-gutters mb-5 mb-lg-0">
              <div class="embed-responsive embed-responsive-16by9 col-lg-6">
                <iframe class="embed-responsive-item mb-3 mb-lg-0"
                      src="{{ video.get_embed_link }}" allowfullscreen></iframe>
              </div>
              <div class="col-lg-6{% if not forloop.counter|divisibleby:2 %} order-lg-first{% endif %}">
                <div class="bg-black text-center h-100 project">
                  <div class="d-flex h-100">
                    <div class="project-text w-100 my-auto text-center text-lg-left">
                      <h4 class="text-white">{{ video.title }}</h4>
                      <p class="mb-0 text-white-50"></p>
                      <hr class="d-none d-lg-block mb-0 ml-0">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
          {% if videos|length > 3 %}
            {% if forloop.counter == 3 %}
              <div class="collapse" id="collapse-songs">
            {% endif %}
            {% if forloop.counter == videos|length %}
                <!-- Link to YouTube -->
                <div class="row bg-lgray text-center no-gutters py-4 mb-5 mb-lg-0">
                  <p class="col-lg-12 text-black-50 my-0">
                    Visit our <a href="https://www.youtube.com/channel/UCU5yJUgbF9E2LxDLS-voY4g" target="_blank">YouTube channel</a> to watch all our videos.
                  </p>
                </div>
              </div>
              <!-- Show more/less button -->
              <div class="row align-content-center no-gutters">
                <div class="mx-auto mt-0 mb-4 mt-lg-4">
                  <a class="btn btn-primary" id="btn-show-songs" data-toggle="collapse" href="#collapse-songs" role="button" aria-expanded="false" aria-controls="collapse-songs">
                    Show More
                  </a>
                </div>
              </div>
            {% endif %}
          {% endif %}
        {% endfor %}
      {% endif %}

      <!-- Buy on Bandcamp -->
      <div class="row justify-content-center no-gutters mt-5 mb-5 mb-lg-0
                  {% if videos|length > 3 %}mt-lg-0{% endif %}">
        <div class="col-lg-6 order-lg-first">
          <div class="bg-black text-center h-100 project">
            <div class="d-flex h-100">
              <div class="project-text w-100 my-auto text-center text-lg-right">
                <h4 class="text-white">Buy our songs on Bandcamp</h4>
                <p class="mb-0 text-white-50">If you like our music, you can support us on <a href="https://kaifeck.bandcamp.com" target="_blank">Bandcamp</a>.</p>
                <hr class="d-none d-lg-block mb-0 mr-0">
              </div>
            </div>
          </div>
        </div>
        <div class="embed-responsive embed-responsive-16by9 col-lg-6">
            <iframe class="embed-responsive-item" src="https://bandcamp.com/EmbeddedPlayer/album=2928980087/size=large/bgcol=ffffff/linkcol=0687f5/artwork=small/transparent=true/" seamless><a href="http://kaifeck.bandcamp.com/album/song-bundle">Song Bundle by Kaifeck</a></iframe>
        </div>
      </div>

    </div>
  </section>

  {% if news or gigs %}
  <!-- News section -->
  <section id="news" class="news-section">
  {% endif %}
  {% if news %}
    <div class="container">
      <div class="row">
        <div class="col-lg-12 mx-auto">
          <h1 class="mb-5 text-center text-white">
            <a href="{% url 'website:news_list' %}" class="white-link" title="Show all posts">
              News
            </a>
          </h1>
          {% for n in news %}
            <div class="row no-gutters mb-4 bg-dgray">
              <div class="col-lg-6">
                <div class="bg-black text-center h-100 project">
                  <div class="d-flex h-100">
                    <div class="project-text w-100 text-center text-lg-left my-auto">
                      <h4 class="text-white">
                        <a class="white-link" href="{% url 'website:news_detail' n.pk %}" title="Show details">
                          {{ n.title }}
                        </a>
                      </h4>
                      {% if n.short_description %}
                      <p class="mb-2 mb-lg-0 text-white-50">
                        {{ n.short_description }}
                      </p>
                      {% endif %}
                      <hr class="d-none d-lg-block mb-3 ml-0">
                      <p class="mb-0 text-light small">
                        posted {{ n.created_at|date:"F d, Y" }}
                      </p>
                      {% if n.modified_at > n.created_at|add:timedelta %}
                      <p class="mb-0 text-white-50 small">
                        modified {{ n.modified_at|date:"F d, Y" }}
                      </p>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
              <div class="my-auto py-0 py-lg-4 px-5 px-lg-0 col-lg-6{% if forloop.counter|divisibleby:2 %} order-lg-first{% endif %}">
                <div class="featured-text{% if forloop.counter|divisibleby:2 %}-r{% else %}-l{% endif %} text-white">
                  <p class="my-0 py-4 py-lg-0">
                    {% if n.content|length <= 500 %}
                      {{ n.content|linebreaksbr }}
                    {% else %}
                      {{ n.content|linebreaksbr|slice:":500" }}...<br/>
                    <a href="{% url 'website:news_detail' n.pk %}">[Read more]</a>
                    {% endif %}
                  </p>
                </div>
              </div>
            </div>
          {% endfor %}
          <div class="text-center{% if gigs %} mb-5{% endif %}">
            <a href="{% url 'website:news_list' %}" class="gray-link">(Show all posts)</a>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  {% if gigs %}
  <!-- Upcoming shows Section -->
    <div class="container mt-5">
      <div class="row">
        <div class="col-lg-12 mx-auto">
          <h1 class="mb-5 text-center text-white">
            <a href="{% url 'website:shows_list' %}" class="white-link" title="Show all shows">
              Upcoming shows
            </a>
          </h1>
          {% for gig in gigs %}
            <div class="row no-gutters mb-4 bg-dgray">
              <div class="col-lg-6">
                <div class="bg-black text-center h-100 project">
                  <div class="d-flex h-100">
                    <div class="project-text w-100 text-center text-lg-left my-auto">
                      <h4 class="text-white">
                        <a class="white-link" href="{% url 'website:shows_detail' gig.pk %}" title="Show details">
                          {{ gig.title }}
                        </a>
                      </h4>
                      <p class="mb-0 text-white-50">
                        {{ gig.gig_start_date }}
                        {% if gig.gig_start_time %}{{ gig.gig_start_time }}{% endif %}
                        {% if gig.gig_end_date and gig.gig_end_time %}
                         - {{ gig.gig_end_date }} {{ gig.gig_end_time }}
                        {% elif gig.gig_end_date %}
                         - {{ gig.gig_end_date }}
                        {% elif gig.gig_end_time %}
                         - {{ gig.gig_end_time }}
                        {% endif %} <br/>
                        in
                        {% if gig.google_maps_link %}<a href="{{ gig.google_maps_link }}" title="View on Google Maps" target="_blank">{% endif %}
                          {{ gig.location }}
                        {% if gig.google_maps_link %}</a>{% endif %}
                      </p>
                      <hr class="d-none d-lg-block mb-0 ml-0">
                      {% if gig.ticket_link %}
                        <a href="{{ gig.ticket_link }}" class="btn btn-primary mt-4" role="button" target="_blank">
                          Get Tickets
                        </a>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
              <div class="my-auto py-0 py-lg-4 px-5 px-lg-0 col-lg-6{% if forloop.counter|divisibleby:2 %} order-lg-first{% endif %}">
                <div class="featured-text{% if forloop.counter|divisibleby:2 %}-r{% else %}-l{% endif %} text-white">
                  <p class="my-0 py-4 py-lg-0">
                    {% if gig.content|length <= 500 %}
                      {{ gig.content|linebreaksbr }}
                    {% else %}
                      {{ gig.content|linebreaksbr|slice:":500" }}...<br/>
                    <a href="{% url 'website:shows_detail' gig.pk %}">[Read more]</a>
                    {% endif %}
                  </p>
                </div>
              </div>
            </div>
          {% endfor %}
          <div class="text-center">
            <a href="{% url 'website:shows_list' %}" class="gray-link">(Show all shows)</a>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
  {% if news or gigs %}
  </section>
  {% endif %}
  <!-- About Section -->
  <section id="about" class="about-section text-center">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2 class="text-white mb-4">We are Kaifeck</h2>
          <p class="text-white-50 mb-3">Influenced by many subgenres of metal, this ambitious band plays music that can be
            primarily described as modern and progressive Metalcore and Thrashmetal. In their live performances, the
            young artists are able to satisfy the whole crowd with their diversified style.</p>
          <p class="text-white-50">Their songs contain heavy riffs and seismic bass paired with impellent drums as well
            as intoxicating melodies and harmonies. No matter if head banger, mosher, wall of death fan or connoisseur
            of music rich in contrast, everybody gets their money's worth.</p>
        </div>
      </div>
      <div id="imagesCarousel" class="carousel slide" data-ride="carousel" data-interval="7000">
        <ol class="carousel-indicators">
          <li data-target="#imagesCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#imagesCarousel" data-slide-to="1"></li>
          <li data-target="#imagesCarousel" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="{% static 'website/img/band/cross.jpg' %}" class="d-block w-100 mb-5" alt="band">
            <div class="carousel-caption d-none d-md-block">
              <h5><!--Optional Header--></h5>
              <p><!--Optional Text--></p>
            </div>
          </div>
          <div class="carousel-item">
            <img src="{% static 'website/img/band/metal_im_woid.jpg' %}" class="d-block w-100 mb-5" alt="band">
            <div class="carousel-caption d-none d-md-block">
              <h5><!--Optional Header--></h5>
              <p><!--Optional Text--></p>
            </div>
          </div>
          <div class="carousel-item">
            <img src="{% static 'website/img/band/humulus.jpg' %}" class="d-block w-100 mb-5" alt="band">
            <div class="carousel-caption d-none d-md-block">
              <h5><!--Optional Header--></h5>
              <p><!--Optional Text--></p>
            </div>
          </div>
        </div>
        <a class="carousel-control-prev" href="#imagesCarousel" role="button" data-slide="prev">
          <!--span class="carousel-control-prev-icon" aria-hidden="true"></span-->
          <!--span class="sr-only">Previous</span-->
        </a>
        <a class="carousel-control-next" href="#imagesCarousel" role="button" data-slide="next">
          <!--span class="carousel-control-next-icon" aria-hidden="true"></span-->
          <!--span class="sr-only">Next</span-->
        </a>
      </div>
      <div class="row mt-3 mx-auto">
        <!--<div class="col-lg-2"></div>-->
        <h3 class="col-lg-12 text-white mb-4">Members</h3>
        <div class="col-lg-12 mb-4">
          <table class="table table-borderless table-sm text-white-50">
            <tbody>
              <tr>
                <td class="leftCol align-middle">Vocals</td><td class="rightCol align-middle">Andreas Straßer</td>
              </tr>
              <tr>
                <td class="leftCol align-middle">Lead Guitar</td><td class="rightCol align-middle">Lukas Koller</td>
              </tr>
              <tr>
                <td class="leftCol align-middle">Rhythm Guitar</td><td class="rightCol align-middle">Adrian Schurius</td>
              </tr>
              <tr>
                <td class="leftCol align-middle">Bass Guitar</td><td class="rightCol align-middle">Patrick Daia</td>
              </tr>
              <tr>
                <td class="leftCol align-middle">Drums</td><td class="rightCol align-middle">Jakob Martin</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!--<div class="col-lg-4"></div>-->
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="contact-section bg-black">
    <div class="container">
      <div class="text-white">

        <h2 class="text-white-50 text-center mb-3">Contact us</h2>

        <!-- Email Form-->
        <form id="emailForm" name="emailFrom" target="_blank">
          {% csrf_token %}
          <div class="form-group">
            <label for="emailInput">Your email address:</label>
            <input type="email" class="form-control" id="emailInput" placeholder="name@example.com"
                   name="sender_email" required>
          </div>
          <div class="form-group">
            <label for="messageInput">Your message:</label>
            <textarea class="form-control" id="messageInput" rows="5" name="sender_message"
                      required></textarea>
          </div>
        </form>
        <p id="waitMsg" class="waitMsg text-center d-none">Sending Email. Please wait...</p>
        <p id="errorMsg" class="errorMsg text-center d-none">Please enter a valid email address.</p>
        <p id="successMsg" class="successMsg text-center d-none">
          Email was sent! You should receive a confirmation mail soon.
        </p>
        <div class="row align-content-center no-gutters">
          <div class="mx-auto mb-5">
            <a class="btn btn-primary" id="btn-send-mail" role="button">
              Send
            </a>
          </div>
        </div>
      </div>

      <!-- Contact Details -->
      <div class="row mt-3">

        <div class="col-md-6 mb-3 mb-md-0">
          <div class="card py-4 h-100">
            <div class="card-body text-center">
              <i class="fas fa-map-marked-alt text-primary mb-2"></i>
              <h4 class="text-uppercase m-0">Hometown</h4>
              <hr class="my-4">
              <div class="small text-black-50">
                <a href="https://www.google.de/maps/place/85276+Pfaffenhofen+an+der+Ilm" title="View on Google Maps" target="_blank">Pfaffenhofen a.d.Ilm, Germany</a>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 mb-3 mb-md-0">
          <div class="card py-4 h-100">
            <div class="card-body text-center">
              <i class="fas fa-envelope text-primary mb-2"></i>
              <h4 class="text-uppercase m-0">Email</h4>
              <hr class="my-4">
              <div class="small text-black-50">
                <a href="mailto:contact@kaifeck.de" title="Send us an email">contact@kaifeck.de</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}
